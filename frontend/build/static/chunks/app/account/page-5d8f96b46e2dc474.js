(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[346],{1790:function(e,a,s){Promise.resolve().then(s.bind(s,8172))},8172:function(e,a,s){"use strict";s.r(a);var r=s(7437),t=s(2265),n=s(7138),o=s(9671),c=s.n(o);a.default=()=>{let[e,a]=(0,t.useState)(""),[s,o]=(0,t.useState)(""),[i,l]=(0,t.useState)(""),[d,u]=(0,t.useState)(""),[_,p]=(0,t.useState)(null);async function h(){if(s!==i)return u("New passwords do not match"),"New passwords do not match";try{let a=await fetch("/api/changePassword",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+_},body:JSON.stringify({password:e,newpassword:s})});if(!a.ok){let e=await a.json();console.log(e.message||"Failed to change password")}await a.json(),u("Password changed successfully")}catch(e){u("Error changing password")}}return(0,t.useEffect)(()=>{p(localStorage.getItem("access_token"))},[]),(0,r.jsxs)("div",{className:c().main,children:[(0,r.jsx)("h1",{children:"Change password"}),(0,r.jsxs)("form",{className:c().form,onSubmit:async e=>{e.preventDefault();let a=Object.fromEntries(new FormData(e.target).entries());await h(a)},children:[(0,r.jsxs)("label",{children:["Current Password:",(0,r.jsx)("input",{type:"password",name:"currentPassword",required:!0,onChange:e=>{a(e.target.value)}})]}),(0,r.jsxs)("label",{children:["New Password:",(0,r.jsx)("input",{type:"password",name:"newPassword",required:!0,onChange:e=>{o(e.target.value)}})]}),(0,r.jsxs)("label",{children:["Confirm New Password:",(0,r.jsx)("input",{type:"password",name:"confirmPassword",required:!0,onChange:e=>{l(e.target.value)}})]}),(0,r.jsx)("button",{type:"submit",children:"Change Password"})]}),(0,r.jsx)("div",{className:c().error,children:d}),(0,r.jsx)("br",{}),(0,r.jsx)(n.default,{className:c().back,href:"../",children:"Back"})]})}},9671:function(e){e.exports={main:"page_main__GlU4n",Label:"page_Label__shcnZ",navbar:"page_navbar__chktt",populatedb:"page_populatedb__Bqr3l",form:"page_form__Ou5d6",cardList:"page_cardList___XOFY",error:"page_error__Jil8M",cart:"page_cart__1D7QG",back:"page_back__mmxhE",cartItem:"page_cartItem__7B9lv",cardItem:"page_cardItem__57QEU"}}},function(e){e.O(0,[967,138,971,23,744],function(){return e(e.s=1790)}),_N_E=e.O()}]);