(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3607:function(e,t,r){Promise.resolve().then(r.bind(r,5172))},4848:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var a=r(7437),i=r(9671),n=r.n(i);function s(e){let t=new Date(e.created).toLocaleString("en-GB",{year:"2-digit",month:"2-digit",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1});return(0,a.jsxs)("div",{className:n().cardItem,onClick:()=>e.clickHandler(e),children:[(0,a.jsxs)("p",{children:["Title: ",e.title]}),(0,a.jsxs)("p",{children:["Description: ",e.desc]}),(0,a.jsxs)("p",{children:["Price: ",e.price,"â‚¬"]}),(0,a.jsxs)("p",{children:["Owner: ",e.owner]}),(0,a.jsxs)("p",{children:["Status: ",e.status]}),(0,a.jsxs)("p",{children:["Created: ",t]})]})}},5172:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return u}});var a=r(7437),i=r(2265),n=r(5482),s=r(9671),c=r.n(s),l=r(4848);function d(){let e=localStorage.getItem("access_token"),[t,r]=(0,i.useState)([]),[s,d]=(0,i.useState)(""),o=async()=>{r([]);try{let t=await fetch("".concat(n.S,"/auth-item/"),{headers:{Authorization:"Bearer "+e},method:"GET"}),i=await t.json(),s=i.map((e,t)=>(0,a.jsx)(l.Z,{title:e.title,desc:e.desc,price:e.price,owner:e.owner,status:e.status,created:e.created,clickHandler:()=>p(e)},t));return r(s),i}catch(e){d("Not logged in")}},u=async t=>{t.preventDefault();let r=t.target.title.value,a=t.target.price.value,i=t.target.desc.value;try{let t=await fetch("/api/additem",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e},body:JSON.stringify({title:r,price:a,desc:i,status:"On sale"})}),n=await t.json();return o(),n}catch(e){d(e)}},p=async t=>{if("On sale"==t.status){d(" ");let r=prompt("Edit price:",t.price);if(null!==r&&""!==r)try{let a=await fetch("/api/auth-item/".concat(t.id,"/"),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e},body:JSON.stringify({price:r,title:t.title,desc:t.desc,owner:t.owner,status:t.status})});await a.json(),o()}catch(e){return e}}else d("Cannot change price of purchased item")};return(0,i.useEffect)(()=>{o()},[]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:c().cardList,children:t}),(0,a.jsx)("div",{className:c().error,children:s}),(0,a.jsx)("div",{children:(0,a.jsxs)("form",{onSubmit:u,className:c().form,children:[(0,a.jsx)("h3",{children:"Create new item"}),(0,a.jsxs)("label",{children:["Title:",(0,a.jsx)("input",{type:"text",name:"title",required:!0})]}),(0,a.jsxs)("label",{children:["Price:",(0,a.jsx)("input",{type:"text",name:"price",required:!0})]}),(0,a.jsxs)("label",{children:["Description:",(0,a.jsx)("textarea",{name:"desc",required:!0})]}),(0,a.jsx)("button",{type:"submit",children:"Add item"}),(0,a.jsx)("br",{})]})})]})}var o=r(7138);function u(){return(0,a.jsxs)("main",{className:c().main,children:[(0,a.jsx)("h1",{children:"My Items"}),(0,a.jsx)("p",{children:"Click on any item to edit its price"}),(0,a.jsx)(d,{}),(0,a.jsx)("br",{}),(0,a.jsx)(o.default,{className:c().back,href:"/",children:"Back"})]})}},5482:function(e,t,r){"use strict";r.d(t,{S:function(){return a}});let a="/api"},9671:function(e){e.exports={main:"page_main__GlU4n",Label:"page_Label__shcnZ",navbar:"page_navbar__chktt",populatedb:"page_populatedb__Bqr3l",form:"page_form__Ou5d6",cardList:"page_cardList___XOFY",error:"page_error__Jil8M",cart:"page_cart__1D7QG",back:"page_back__mmxhE",cartItem:"page_cartItem__7B9lv",cardItem:"page_cardItem__57QEU"}}},function(e){e.O(0,[967,138,971,23,744],function(){return e(e.s=3607)}),_N_E=e.O()}]);