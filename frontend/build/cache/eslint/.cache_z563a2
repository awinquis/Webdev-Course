[{"/home/greg/Documents/WebTech/frontend/src/app/account/page.js":"1","/home/greg/Documents/WebTech/frontend/src/app/layout.js":"2","/home/greg/Documents/WebTech/frontend/src/app/login/components/populate.js":"3","/home/greg/Documents/WebTech/frontend/src/app/login/page.js":"4","/home/greg/Documents/WebTech/frontend/src/app/myitems/components/BrowseCards.js":"5","/home/greg/Documents/WebTech/frontend/src/app/myitems/components/Card.js":"6","/home/greg/Documents/WebTech/frontend/src/app/myitems/components/Cart.js":"7","/home/greg/Documents/WebTech/frontend/src/app/myitems/components/UserCards.js":"8","/home/greg/Documents/WebTech/frontend/src/app/myitems/page.js":"9","/home/greg/Documents/WebTech/frontend/src/app/page.js":"10","/home/greg/Documents/WebTech/frontend/src/app/signup/page.js":"11","/home/greg/Documents/WebTech/frontend/src/utils/api.js":"12","/home/greg/Documents/WebTech/frontend/src/utils/csrfCookie.js":"13"},{"size":3103,"mtime":1723455415899,"results":"14","hashOfConfig":"15"},{"size":382,"mtime":1723310048837,"results":"16","hashOfConfig":"15"},{"size":565,"mtime":1723453328278,"results":"17","hashOfConfig":"15"},{"size":4448,"mtime":1723455106566,"results":"18","hashOfConfig":"15"},{"size":6959,"mtime":1723464901627,"results":"19","hashOfConfig":"15"},{"size":653,"mtime":1723215606122,"results":"20","hashOfConfig":"15"},{"size":422,"mtime":1723197001622,"results":"21","hashOfConfig":"15"},{"size":3671,"mtime":1723456449549,"results":"22","hashOfConfig":"15"},{"size":431,"mtime":1723455553439,"results":"23","hashOfConfig":"15"},{"size":779,"mtime":1723455338552,"results":"24","hashOfConfig":"15"},{"size":1667,"mtime":1723296245741,"results":"25","hashOfConfig":"15"},{"size":86,"mtime":1701113392000,"results":"26","hashOfConfig":"15"},{"size":555,"mtime":1701113392000,"results":"27","hashOfConfig":"15"},{"filePath":"28","messages":"29","suppressedMessages":"30","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"qtrblp",{"filePath":"31","messages":"32","suppressedMessages":"33","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"34","messages":"35","suppressedMessages":"36","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"37","messages":"38","suppressedMessages":"39","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"40","messages":"41","suppressedMessages":"42","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"43","messages":"44","suppressedMessages":"45","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"46","messages":"47","suppressedMessages":"48","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"49","messages":"50","suppressedMessages":"51","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"52"},{"filePath":"53","messages":"54","suppressedMessages":"55","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"56","messages":"57","suppressedMessages":"58","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"59","messages":"60","suppressedMessages":"61","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"62","messages":"63","suppressedMessages":"64","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"65","messages":"66","suppressedMessages":"67","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/home/greg/Documents/WebTech/frontend/src/app/account/page.js",[],[],"/home/greg/Documents/WebTech/frontend/src/app/layout.js",[],[],"/home/greg/Documents/WebTech/frontend/src/app/login/components/populate.js",[],[],"/home/greg/Documents/WebTech/frontend/src/app/login/page.js",[],[],"/home/greg/Documents/WebTech/frontend/src/app/myitems/components/BrowseCards.js",["68","69"],[],"/home/greg/Documents/WebTech/frontend/src/app/myitems/components/Card.js",[],[],"/home/greg/Documents/WebTech/frontend/src/app/myitems/components/Cart.js",[],[],"/home/greg/Documents/WebTech/frontend/src/app/myitems/components/UserCards.js",["70"],[],"\"use client\"; \r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { API_BASE } from \"@/utils/api\";\r\nimport styles from '../../page.module.css';\r\nimport Card from \"./Card\";\r\n\r\n\r\nconst ACCESS_TOKEN_KEY = \"access_token\";\r\n\r\nexport default function UserCards(){\r\n\r\n\r\n\t  const token = typeof window !== 'undefined' ? localStorage.getItem(ACCESS_TOKEN_KEY) : null;\r\n    const [cardList, setCardList] = useState([]);\r\n    const [errorm, setError] = useState(\"\");\r\n    \r\n    const fetchCards = async () => {\r\n      setCardList([]);\r\n      try {\r\n        const response = await fetch(`${API_BASE}/auth-item/`, {\r\n          headers: {\r\n            \"Authorization\": \"Bearer \" + token,\r\n          },\r\n          method: \"GET\",\r\n        });\r\n        const result = await response.json();\r\n        const ItemListJSX = result.map((item, key) => {\r\n          return<Card \r\n            title={item.title}\r\n            desc={item.desc}\r\n            price={item.price}\r\n            owner={item.owner}\r\n            status={item.status}\r\n            created= {item.created}\r\n            key={key}\r\n            clickHandler={() => updateItemPrice(item)}            \r\n          />\r\n        });\r\n        setCardList(ItemListJSX);\r\n        return result\r\n      } \r\n      catch (error) {\r\n        setError(\"Not logged in\");\r\n      } \r\n    };\r\n\r\n    const addItem = async (event) => {\r\n      event.preventDefault(); // prevent the default form submission behavior\r\n      const title = event.target.title.value;\r\n      const price = event.target.price.value;\r\n      const desc = event.target.desc.value;\r\n      try {\r\n        const response = await fetch('/api/additem', {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n            \"Authorization\": \"Bearer \" + token,\r\n\r\n          },\r\n          body: JSON.stringify({\r\n            title: title,\r\n            price: price,\r\n            desc: desc,\r\n            status: \"On sale\"\r\n          })\r\n        });\r\n        const res = await response.json();\r\n        fetchCards();\r\n        return res\r\n      } catch (error) {\r\n        setError(error); // handle any errors\r\n      }\r\n   \r\n    }\r\n\r\n   const updateItemPrice = async (item) => {\r\n    if (item.status == \"On sale\"){\r\n      setError(\" \")\r\n      const newPrice = prompt(\"Edit price:\", item.price);\r\n      if (newPrice !== null && newPrice !== \"\") {\r\n        try {\r\n          const response = await fetch(`/api/auth-item/${item.id}/`, {\r\n            method: 'PUT',\r\n            headers: {\r\n              'Content-Type': 'application/json',\r\n              \"Authorization\": \"Bearer \" + token,\r\n\r\n            },\r\n            body: JSON.stringify({ price: newPrice,title:item.title,desc:item.desc,owner:item.owner,status:item.status })\r\n          });\r\n          await response.json();\r\n        fetchCards();\r\n        } catch (error) {\r\n          return(error);\r\n        }\r\n      }\r\n  }\r\n  else{\r\n    setError(\"Cannot change price of purchased item\")\r\n  }\r\n  };\r\n\r\n\r\n    useEffect(() => {\r\n      fetchCards();\r\n    }, []);\r\n\r\n    return(<>\r\n                    \r\n     <div className={styles.cardList}>\r\n        {cardList}\r\n      </div>\r\n      \r\n      <div className={styles.error}\r\n      >{errorm}</div>\r\n\r\n\r\n<div>\r\n  <form onSubmit={addItem} className={styles.form}>\r\n    <h3>Create new item</h3>\r\n    <label>\r\n      Title:<input type=\"text\" name=\"title\" required />\r\n    </label>\r\n    <label>\r\n      Price:<input type=\"text\" name=\"price\"  required/>\r\n    </label>\r\n    <label>\r\n      Description:<textarea name=\"desc\" required/>\r\n    </label>\r\n    <button type=\"submit\">Add item</button>\r\n    <br/>\r\n  </form>\r\n</div>\r\n\r\n      \r\n    </>\r\n    )\r\n}","/home/greg/Documents/WebTech/frontend/src/app/myitems/page.js",[],[],"/home/greg/Documents/WebTech/frontend/src/app/page.js",[],[],"/home/greg/Documents/WebTech/frontend/src/app/signup/page.js",[],[],"/home/greg/Documents/WebTech/frontend/src/utils/api.js",[],[],"/home/greg/Documents/WebTech/frontend/src/utils/csrfCookie.js",[],[],{"ruleId":"71","severity":1,"message":"72","line":242,"column":5,"nodeType":"73","endLine":242,"endColumn":17,"suggestions":"74"},{"ruleId":"71","severity":1,"message":"75","line":245,"column":7,"nodeType":"73","endLine":245,"endColumn":13,"suggestions":"76"},{"ruleId":"71","severity":1,"message":"72","line":107,"column":8,"nodeType":"73","endLine":107,"endColumn":10,"suggestions":"77"},"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'fetchCards'. Either include it or remove the dependency array.","ArrayExpression",["78"],"React Hook useEffect has a missing dependency: 'updateCart'. Either include it or remove the dependency array.",["79"],["80"],{"desc":"81","fix":"82"},{"desc":"83","fix":"84"},{"desc":"85","fix":"86"},"Update the dependencies array to be: [fetchCards, searchterm]",{"range":"87","text":"88"},"Update the dependencies array to be: [cart, updateCart]",{"range":"89","text":"90"},"Update the dependencies array to be: [fetchCards]",{"range":"91","text":"92"},[6028,6040],"[fetchCards, searchterm]",[6087,6093],"[cart, updateCart]",[3041,3043],"[fetchCards]"]